<div class="row">
  <div class="col-md-7">
    <div class="row">
      <div class="panel panel-default">
        <div class="panel-heading">
          <h3 class="panel-title">{{model.family.name}} Family</h3>
        </div>
        <div class="panel-body">
          <table class="table table-striped table-condensed">
            <tbody>
            <tr>
              <td>Contact Email</td>
              <td>{{model.family.contactEmail}}</td>
                {{#if preferEmail}}
                    <td>(preferred)</td>
                {{/if}}

            </tr>
            <tr>
              <td>Contact Phone</td>
              <td>{{model.family.contactPhone}}</td>
            </tr>
            <tr>
              <td>Mailing Address</td>
                <td>{{model.family.mailingAddressLine1}}<br/>
                    {{#if model.family.mailingAddressLine2}}
                        {{model.family.mailingAddressLine2}}<br/>
                    {{/if}}
                    {{model.family.mailingAddressCity}}, {{model.family.mailingAddressState}} {{model.family.mailingAdressZip}}</td>
            </tr>
            <tr>
                {{#if model.family.preferredContactMethod}}
                    <td>Preferred Contact Method</td>
                    <td>{{model.family.preferredContactMethod}}</td>
                {{/if}}
            </tr>
            </tbody>
          </table>
        </div>
      </div>
    </div>
    <div class="row">
      <div class="panel panel-default">
        <div class="panel-heading">
          <div class="row">
          <div class="col-md-9">
            <h3 class="panel-title">Family Members </h3>
          </div>
          <div class="col-md-3 text-right">
          <a {{action 'addFamilyMember' result}} ><span class="glyphicon glyphicon-plus"></span></a>
          </div>
          </div>
        </div>
        <div class="panel-body">

          <form class="form-inline">
          <table class="table table-striped table-condensed">
            <thead>
            <tr>
              <th class="col-md-1"></th>
              <th class="col-md-4">First</th>
              <th class="col-md-4">Last</th>
              <th class="col-md-1">Age</th>
              <th class="col-md-1">&nbsp;</th>
              <th class="col-md-1">&nbsp;</th>
            </tr>
            </thead>
            <tbody>
            {{#each model.familyMembers.results as | familyMember | }}
            <tr>
              {{input type="checkbox" name="family_member_id" checked=familyMember.selected}}
              {{#link-to 'families.familyMember' model.family.id familyMember.id tagName='td'}}
                  {{familyMember.firstName}}
              {{/link-to}}
              {{#link-to 'families.familyMember' model.family.id familyMember.id tagName='td'}}
                  {{familyMember.lastName}}
              {{/link-to}}
              {{#link-to 'families.familyMember' model.family.id familyMember.id tagName='td'}}
                  {{familyMember.age}}
              {{/link-to}}
              <td  class="text-right">
                <a {{action 'editFamilyMember' familyMember}} ><span class="glyphicon glyphicon-pencil"></span></a>
              </td>
              <td  class="text-right">
                <a {{action 'deleteFamilyMember' familyMember}} ><span class="glyphicon glyphicon-trash"></span></a>
              </td>
            </tr>
            {{/each}}
            </tbody>
          </table>

          <div class="row">
              {{#x-select value=selectedProduction action="selectProduction" as |xs|}}
                {{#each model.productions.results as | production | }}
                    {{#xs.option value=production.id}}{{production.name}}{{/xs.option}}
                {{/each}}
              {{/x-select}}
          </div>

          <div class="row">
            <button {{action 'registerFamilyMembers' }} class="btn btn-primary">Register</button>
          </div>

          </form>
        </div>
      </div>
    </div>
  </div>
{{#if isEditing}}
  <div class="col-md-offset-1 col-md-4">
    <div class="row">
      <div class="panel panel-default">
        <div class="panel-heading">
          <h3 class="panel-title">Add Family Member</h3>
        </div>
        <div class="panel-body">
          <form class="form-inline">
            <div class="form-group">
              {{input type="text" class="form-control col-md-3" placeholder="First Name" value=editingFamilyMember.firstName}}
              {{input type="text" class="form-control col-md-3" placeholder="Last Name" value=editingFamilyMember.lastName}}
            </div>
            <div class="form-group">
              {{input type="text" class="form-control col-md-3" placeholder="Height" value=editingFamilyMember.height}}
              {{input type="text" class="form-control col-md-3" placeholder="Weight (lbs)" value=editingFamilyMember.weight}}
              {{input type="text" class="form-control col-md-3" placeholder="Age" value=editingFamilyMember.age}}
            </div>
            <div class="form-group">
              {{input type="textarea" cols="3" class="form-control" placeholder="Prior Roles" value=editingFamilyMember.priorRoles}}
            </div>
            <div class="row">
              <div class="col-sm-10">
              <button {{action 'saveEditingFamilyMember' }} class="btn btn-primary">
                {{#if isAdd}}
                  Add
                  {{else}}
                  Save
                {{/if}}
              </button>
                <button {{action 'cancelEditingFamilyMember' }} class="btn btn-default">Cancel</button>
                  {{editingFamilyMember.location}}
              </div>
            </div>
          </form>
        </div>
      </div>
    </div>
  </div>
{{/if}}
</div>
